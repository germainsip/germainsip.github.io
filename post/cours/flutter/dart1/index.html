<!DOCTYPE html>
<html class="no-js" lang="fr">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Flutter et Dart - Mes ressources</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<meta property="og:title" content="Flutter et Dart" />
<meta property="og:description" content="Bienvenue dans le monde merveilleux de Flutter Qu&rsquo;est-ce que Flutter C&rsquo;est un Framework développé par Google pour développer des applications pour Android, iOS, Windows, Mac, Linux, et le web.
 En clair, codez une fois et compilez pour tout! (pour exporter vers des ios il est nécessaire d&rsquo;avoir un Mac)
 Environnement de développement La doc de Flutter, en anglais, installer Flutter vous explique la démarche d&rsquo;installation pour les 3 os (Windows, MacOS et Linux)." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/post/cours/flutter/dart1/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-03-04T14:51:21&#43;02:00" />
<meta property="article:modified_time" content="2021-03-04T14:51:21&#43;02:00" />


	<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Flutter et Dart"/>
<meta name="twitter:description" content="Bienvenue dans le monde merveilleux de Flutter Qu&rsquo;est-ce que Flutter C&rsquo;est un Framework développé par Google pour développer des applications pour Android, iOS, Windows, Mac, Linux, et le web.
 En clair, codez une fois et compilez pour tout! (pour exporter vers des ios il est nécessaire d&rsquo;avoir un Mac)
 Environnement de développement La doc de Flutter, en anglais, installer Flutter vous explique la démarche d&rsquo;installation pour les 3 os (Windows, MacOS et Linux)."/>

	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">
	<link rel="stylesheet" href="/css/style.css">
	<link rel="stylesheet" href="/css/custom.css">
	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container">
		<div class="logo">
			<a class="logo__link" href="/" title="Mes ressources" rel="home">
				<div class="logo__title">Mes ressources</div>
				<div class="logo__tagline">Site de partage de ressources</div>
			</a>
		</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Flutter et Dart</h1>
			<p class="post__lead">Introduction à Flutter en passant par Dart</p>
			<div class="post__meta meta">
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg>
	<time class="meta__text" datetime="2021-03-04T14:51:21&#43;02:00">04-03-2021</time>
</div>

<div class="meta__item-categories meta__item">
	<svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2l1 2h8v11h-16v-13z"/></svg>
	<span class="meta__text"><a class="meta__link" href="/categories/flutter/" rel="category">Flutter</a>
	</span>
</div></div>
		</header>
		<figure class="post__thumbnail">
			<img src="/img/flutter/flutt_dart.png" alt="Flutter et Dart">
		</figure>
<div class="post__toc toc">
	<div class="toc__title">Sommaire</div>
	<div class="toc__menu">
		<nav id="TableOfContents">
  <ul>
    <li><a href="#bienvenue-dans-le-monde-merveilleux-de-flutter">Bienvenue dans le monde merveilleux de Flutter</a>
      <ul>
        <li><a href="#quest-ce-que-flutter">Qu&rsquo;est-ce que Flutter</a></li>
        <li><a href="#environnement-de-développement">Environnement de développement</a></li>
      </ul>
    </li>
    <li><a href="#premier-projet-avec-flutter">Premier projet avec Flutter</a></li>
    <li><a href="#dart-le-langage-de-flutter">Dart le langage de Flutter</a></li>
    <li><a href="#écrivez-votre-première-application-flutter">Écrivez votre première application Flutter</a></li>
    <li><a href="#allons-un-peu-plus-loin-avec-des-imports-de-bibliothèques">Allons un peu plus loin avec des imports de bibliothèques</a></li>
    <li><a href="#stateless-et-statefull">Stateless et StateFull</a></li>
    <li><a href="#faisons-une-liste-déroulante">Faisons une liste déroulante</a></li>
    <li><a href="#un-peu-plus-de-style-et-des-interactions">Un peu plus de style et des interactions</a></li>
    <li><a href="#on-ajoute-une-vue-avec-les-éléments-sélectionnés">On ajoute une vue avec les éléments sélectionnés</a></li>
    <li><a href="#dernier-make-up">Dernier make-up</a></li>
  </ul>
</nav>
	</div>
</div>
<div class="content post__content clearfix">
			<h2 id="bienvenue-dans-le-monde-merveilleux-de-flutter">Bienvenue dans le monde merveilleux de Flutter</h2>
<h3 id="quest-ce-que-flutter">Qu&rsquo;est-ce que Flutter</h3>
<p>C&rsquo;est un Framework développé par Google pour développer des applications pour Android, iOS, Windows, Mac, Linux, et le web.</p>
<blockquote>
<p>En clair, codez une fois et compilez pour tout!
(<em>pour exporter vers des ios il est nécessaire d&rsquo;avoir un Mac</em>)</p>
</blockquote>
<h3 id="environnement-de-développement">Environnement de développement</h3>
<p>La doc de Flutter, en anglais,  <a href="https://flutter.dev/docs/get-started/install">installer Flutter</a> vous explique la démarche d&rsquo;installation pour les 3 os (Windows, MacOS et Linux).</p>
<blockquote>
<p>Si vous n&rsquo;êtes pas à l&rsquo;aise avec l&rsquo;anglais demandez une démo à votre formateur.</p>
</blockquote>
<p>En ce qui concerne l&rsquo;éditeur, vous pouvez choisir IntelliJ, Android Studio ou Visual studio code. Pour la mise ne place, suivez la doc <a href="https://flutter.dev/docs/get-started/editor?tab=vscode">réglage de l&rsquo;éditeur</a>.</p>
<h2 id="premier-projet-avec-flutter">Premier projet avec Flutter</h2>
<p>Si vous avez choisi Vscode, placez vous dans votre dossier de travail et affichez le la palette de commande (ctrl+shift+p ou cmd+shift+p) et tapez flutter puis choisissez New Project.</p>
<p>Il vous sera demandé le dossier de destination pour la création du projet.</p>
<p>Un fois la procédure terminée, vous pouvez tester le modèle proposé.</p>
<p>Si vous utilisez AndroidStudio(ou autre outil Jetbrain) ce sera new projet flutter.</p>
<h2 id="dart-le-langage-de-flutter">Dart le langage de Flutter</h2>
<p>Suivez l&rsquo;article sur <a href="../dart0/">le langage Dart</a> si vous voulez comprendre les différences avec Java.</p>
<h2 id="écrivez-votre-première-application-flutter">Écrivez votre première application Flutter</h2>
<p>Après avoir généré un nouveau projet Flutter, remplacez le contenu de <code>main.dart</code> par</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">import</span> <span style="color:#e6db74">&#39;package:flutter/material.dart&#39;</span>;

<span style="color:#66d9ef">void</span> main() <span style="color:#f92672">=&gt;</span> runApp(MyApp());

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyApp</span> <span style="color:#66d9ef">extends</span> StatelessWidget {
  <span style="color:#960050;background-color:#1e0010">@</span>override
  Widget build(BuildContext context) {
    <span style="color:#66d9ef">return</span> MaterialApp(
      title: <span style="color:#e6db74">&#39;Salut Flutter&#39;</span>,
      home: Scaffold(
        appBar: AppBar(
          title: <span style="color:#66d9ef">const</span> Text(<span style="color:#e6db74">&#39;Salut les Flutterinos&#39;</span>),
        ),
        body: <span style="color:#66d9ef">const</span> Center(
          child: <span style="color:#66d9ef">const</span> Text(<span style="color:#e6db74">&#39;Il est vivant!!!&#39;</span>),
        ),
      ),
    );
  }
}
</code></pre></div><p><img src="/img/flutter/flutt1.png" alt="flut1"></p>
<p>ou sur ios</p>
<p><img src="/img/flutter/flutt1ios.png" alt="flutt1"></p>
<p>On utilise <code>MaterialApp</code> pour construire l&rsquo;application ce qui nous permet d&rsquo;utiliser la bibliothèque d&rsquo;éléments pré-construits.</p>
<h2 id="allons-un-peu-plus-loin-avec-des-imports-de-bibliothèques">Allons un peu plus loin avec des imports de bibliothèques</h2>
<p>Dans <code>pubspec.yaml</code> ajoutez les deux dépendances suivantes</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">  <span style="color:#f92672">list_french_words</span>: <span style="color:#ae81ff">^0.1.0+1</span>
  <span style="color:#f92672">recase</span>: <span style="color:#ae81ff">^3.0.0</span>
</code></pre></div><p>la première va nous donner une liste de 340000 mots français et l&rsquo;autre va nous permettre de formater les String à notre idée. Le dépot de dart est <a href="https://pub.dev">ici</a></p>
<p>dans notre <code>main.dart</code> ajoutons un mot français au hasard.</p>
<p>Créons d&rsquo;abord une classe Mots qui va nous générer tout ça <code>Mots.dart</code>dans un nouveau package model:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">import</span> <span style="color:#e6db74">&#39;dart:math&#39;</span>;

<span style="color:#66d9ef">import</span> <span style="color:#e6db74">&#39;package:list_french_words/list_french_words.dart&#39;</span>;

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Mots</span> {
  <span style="color:#66d9ef">final</span> nb <span style="color:#f92672">=</span> list_french_words.length;

  random(){
    <span style="color:#66d9ef">var</span> rd <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Random();
    <span style="color:#66d9ef">int</span> rdFix <span style="color:#f92672">=</span> rd.nextInt(nb<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>);
    <span style="color:#66d9ef">return</span> list_french_words[rdFix];
  }
}
</code></pre></div><p>Ajoutez cette méthode à la fin du <code>main.dart</code> (en faisant les import qui vont bien) et modifiez le texte à afficher.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">import</span> <span style="color:#e6db74">&#39;package:app_one/model/Mots.dart&#39;</span>;
<span style="color:#66d9ef">import</span> <span style="color:#e6db74">&#39;package:flutter/material.dart&#39;</span>;

<span style="color:#66d9ef">void</span> main() {
  runApp(MyApp());
}

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyApp</span> <span style="color:#66d9ef">extends</span> StatelessWidget {
  <span style="color:#75715e">// This widget is the root of your application.
</span><span style="color:#75715e"></span>  <span style="color:#960050;background-color:#1e0010">@</span>override
  Widget build(BuildContext context) {
    <span style="color:#66d9ef">return</span> MaterialApp(
      title: <span style="color:#e6db74">&#39;Salut Flutter&#39;</span>,
      home: Scaffold(
        appBar: AppBar(
          title: Text(<span style="color:#e6db74">&#39;Salut les Flutterinos&#39;</span>),
        ),
        body: Center(
          child: Text(
            <span style="color:#66d9ef">new</span> Mots().random(),
            style: TextStyle(fontSize: <span style="color:#ae81ff">24.0</span>),
          ),
        ),
      ),
    );
  }
}

</code></pre></div><p><img src="/img/flutter/mots1ios.png" alt="mots"></p>
<h2 id="stateless-et-statefull">Stateless et StateFull</h2>
<p>Pour faire un peu plus propre, nous allons utiliser les <strong>widget</strong>.</p>
<p>Nous allons utiliser les widget. Les widget sont statefull ou stateless. C&rsquo;est à dire:</p>
<ul>
<li><strong>Stateless</strong>: pas d&rsquo;état donc immuable lors de la vie de l&rsquo;application</li>
<li><strong>Statefull</strong>: ajoute une notion d&rsquo;état qui permet de faire évoluer le widget. Le widget crée un état et qui persiste et le widget peut être supprimé et généré avec l&rsquo;état.</li>
</ul>
<p>A la fin du <code>main.dart</code> tapez simplement <code>stful</code> et l&rsquo;IDE génère le code pour vous. Il ne reste qu&rsquo;à nommer le widget (RandomWords). Ensuite, nous déplaçons le code au bon endroit.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">import</span> <span style="color:#e6db74">&#39;package:app_one/model/Mots.dart&#39;</span>;
<span style="color:#66d9ef">import</span> <span style="color:#e6db74">&#39;package:flutter/material.dart&#39;</span>;

<span style="color:#66d9ef">void</span> main() {
  runApp(MyApp());
}

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyApp</span> <span style="color:#66d9ef">extends</span> StatelessWidget {
  <span style="color:#960050;background-color:#1e0010">@</span>override
  Widget build(BuildContext context) {
    <span style="color:#66d9ef">return</span> MaterialApp(
      title: <span style="color:#e6db74">&#39;Salut Flutter&#39;</span>,
      home: Scaffold(
        appBar: AppBar(
          title: Text(<span style="color:#e6db74">&#39;Salut les Flutterinos&#39;</span>),
        ),
        body: Center(
          child: RandomWords(),
        ),
      ),
    );
  }
}

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">RandomWords</span> <span style="color:#66d9ef">extends</span> StatefulWidget {
  <span style="color:#960050;background-color:#1e0010">@</span>override
  _RandomWordsState createState() <span style="color:#f92672">=&gt;</span> _RandomWordsState();
}

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">_RandomWordsState</span> <span style="color:#66d9ef">extends</span> State<span style="color:#f92672">&lt;</span>RandomWords<span style="color:#f92672">&gt;</span> {
  <span style="color:#960050;background-color:#1e0010">@</span>override
  Widget build(BuildContext context) {

    <span style="color:#66d9ef">return</span> Text(
      <span style="color:#66d9ef">new</span> Mots().random(),
      style: TextStyle(fontSize: <span style="color:#ae81ff">24.0</span>),
    );
  }
}
</code></pre></div><p>Si vous lancez ce code les changements ne sont pas visibles mais ils seront utils juste après quand nous allons générer plusieurs mots dans une liste.</p>
<h2 id="faisons-une-liste-déroulante">Faisons une liste déroulante</h2>
<p>D&rsquo;abord, on va créer une méthode qui nous permettra de générer nos mots.
Modifiez le fichier <code>Mots.dart</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">import</span> <span style="color:#e6db74">&#39;dart:math&#39;</span>;

<span style="color:#66d9ef">import</span> <span style="color:#e6db74">&#39;package:list_french_words/list_french_words.dart&#39;</span>;
<span style="color:#66d9ef">import</span> <span style="color:#e6db74">&#39;package:recase/recase.dart&#39;</span>;

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Mots</span> {
  <span style="color:#66d9ef">final</span> nb <span style="color:#f92672">=</span> list_french_words.length;
<span style="color:#75715e">/// génère un mot aléatoirement
</span><span style="color:#75715e"></span>  random(){
    <span style="color:#66d9ef">var</span> rd <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Random();
    <span style="color:#66d9ef">int</span> rdFix <span style="color:#f92672">=</span> rd.nextInt(nb<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>);
    <span style="color:#66d9ef">return</span> list_french_words[rdFix];
  }

  <span style="color:#75715e">/// génère une liste aléatoire de 10 mots
</span><span style="color:#75715e"></span>  <span style="color:#75715e">/// de type ReCase
</span><span style="color:#75715e"></span>   generateMots() {
    <span style="color:#66d9ef">var</span> list <span style="color:#f92672">=</span> <span style="color:#f92672">&lt;</span>ReCase<span style="color:#f92672">&gt;</span>[];
    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>; i<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">11</span>;i<span style="color:#f92672">++</span>){
      list.add(<span style="color:#66d9ef">new</span> ReCase(random()));
    }
    <span style="color:#66d9ef">return</span> list;
  }
}
</code></pre></div><p>Nous allons maintenant pouvoir modifier la classe <code>_RandomWordsState</code> pour qu&rsquo;elle génère des mots quand l&rsquo;utilisateur fait défiler la liste.</p>
<p>On a d&rsquo;abord besoin de 2 constantes:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">_RandomWordsState</span> <span style="color:#66d9ef">extends</span> State<span style="color:#f92672">&lt;</span>RandomWords<span style="color:#f92672">&gt;</span> {
  <span style="color:#66d9ef">final</span> List<span style="color:#f92672">&lt;</span>Mot<span style="color:#f92672">&gt;</span> _suggestions <span style="color:#f92672">=</span> <span style="color:#f92672">&lt;</span>Mot<span style="color:#f92672">&gt;</span>[];
  ...
</code></pre></div><p>Puis on ajoute une méthode qui va créer la ListView.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart">  Widget _buildSuggestions() {
    <span style="color:#66d9ef">var</span> mot <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Mots();
    <span style="color:#66d9ef">return</span> ListView.builder(
        padding: EdgeInsets.all(<span style="color:#ae81ff">16.0</span>),
        itemBuilder: <span style="color:#75715e">/*1*/</span> (context, i) {
          <span style="color:#66d9ef">if</span> (i.isOdd) <span style="color:#66d9ef">return</span> Divider(); <span style="color:#75715e">/*2*/</span>

          <span style="color:#66d9ef">final</span> index <span style="color:#f92672">=</span> i <span style="color:#f92672">~/</span> <span style="color:#ae81ff">2</span>; <span style="color:#75715e">/*3*/</span>
          <span style="color:#66d9ef">if</span> (index <span style="color:#f92672">&gt;=</span> _suggestions.length) {
            _suggestions.addAll(mot.generateMots()); <span style="color:#75715e">/*4*/</span>
          }
          <span style="color:#66d9ef">return</span> _buildRow(_suggestions[index]);
        });
  }
</code></pre></div><p>La méthode <code>_buildSuggestions</code> fait appelle à la méthode <code>_buildrow</code> qui construit les lignes</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart">Widget _buildRow(ReCase suggestion) {
    <span style="color:#66d9ef">return</span> ListTile(
      title: Text(
        suggestion.pascalCase,
        style: TextStyle(fontSize: <span style="color:#ae81ff">24.0</span>),
      ),
    );
  }
</code></pre></div><p>On modifie maintenant la méthode <code>build</code> du <code>_RandomWordsState</code> pour utiliser ce que nous venons d&rsquo;écrire</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#960050;background-color:#1e0010">@</span>override
  Widget build(BuildContext context) {
    <span style="color:#66d9ef">return</span> _buildSuggestions();
  }
</code></pre></div><p>Voilà !!! Vous devriez obtenir quelque chose comme ça</p>
<p><img src="/img/flutter/flutlistios.png" alt="flutlist"></p>
<h2 id="un-peu-plus-de-style-et-des-interactions">Un peu plus de style et des interactions</h2>
<p>Nous allons ajouter des icônes à notre design et faire un peu de mise en place pour la suite.</p>
<p>D&rsquo;abord ajoutez la constante pour sauvegarder les interactions</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart">...
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">_RandomWordsState</span> <span style="color:#66d9ef">extends</span> State<span style="color:#f92672">&lt;</span>RandomWords<span style="color:#f92672">&gt;</span> {
  <span style="color:#66d9ef">final</span> _suggestions <span style="color:#f92672">=</span> <span style="color:#f92672">&lt;</span>ReCase<span style="color:#f92672">&gt;</span>[];
  <span style="color:#66d9ef">final</span> _saved <span style="color:#f92672">=</span> <span style="color:#f92672">&lt;</span>ReCase<span style="color:#f92672">&gt;</span>{};
</code></pre></div><p>On ajoute aussi <code>alreadySaved</code> à la méthode <code>_buildRow</code> pour s&rsquo;assurer que la mot n&rsquo;a pas été ajouté aux favoris.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart">Widget _buildRow(ReCase suggestion) {
    <span style="color:#66d9ef">final</span> alreadySaved <span style="color:#f92672">=</span> _saved.contains(suggestion); <span style="color:#75715e">//ici
</span><span style="color:#75715e"></span>    ...
</code></pre></div><p>Enfin, on ajoute les icones qui auront deux états.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart">  Widget _buildRow(ReCase suggestion) {
    <span style="color:#66d9ef">final</span> alreadySaved <span style="color:#f92672">=</span>_saved.contains(suggestion);
    <span style="color:#66d9ef">return</span> ListTile(
      title: Text(
        suggestion.pascalCase,
        style: TextStyle(fontSize: <span style="color:#ae81ff">24.0</span>),
      ),
      trailing: Icon(   <span style="color:#75715e">// ici..
</span><span style="color:#75715e"></span>        alreadySaved <span style="color:#f92672">?</span> Icons.favorite <span style="color:#f92672">:</span> Icons.favorite_border,
        color: alreadySaved <span style="color:#f92672">?</span> Colors.red <span style="color:#f92672">:</span> <span style="color:#66d9ef">null</span>,
      ),
    );
  }
</code></pre></div><p>Tada&hellip;</p>
<p><img src="/img/flutter/coeurios.png" alt="coeur"></p>
<blockquote>
<p>Pour le moment nous n&rsquo;avons pas d&rsquo;interactions.</p>
</blockquote>
<p>Pour activer nos coeurs, nous allons ajouter activer <code>onTap</code> pour que l&rsquo;utilisateur puisse toucher le coeur et <code>setState</code> pour sauvegarder l&rsquo;état</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart">Widget _buildRow(Mot suggestion) {
    <span style="color:#66d9ef">final</span> alreadySaved <span style="color:#f92672">=</span> _saved.contains(suggestion);
    <span style="color:#66d9ef">return</span> ListTile(
      title: Text(
        suggestion.formatPas(),
        style: _biggerFont,
      ),
      trailing: Icon(
        alreadySaved <span style="color:#f92672">?</span> Icons.favorite <span style="color:#f92672">:</span> Icons.favorite_border,
        color: alreadySaved <span style="color:#f92672">?</span> Colors.red <span style="color:#f92672">:</span> <span style="color:#66d9ef">null</span>,
      ),
      onTap: () {<span style="color:#75715e">//d&#39;ici
</span><span style="color:#75715e"></span>        setState(() {
          <span style="color:#66d9ef">if</span> (alreadySaved) {
            _saved.remove(suggestion);
          } <span style="color:#66d9ef">else</span> {
            _saved.add(suggestion);
          }
        });
      },<span style="color:#75715e">// jusque là
</span><span style="color:#75715e"></span>    );
  }
</code></pre></div><p>Je ne fais pas de screen mais maintenant les cœurs sont cliquables et s&rsquo;affichent en rouge.</p>
<h2 id="on-ajoute-une-vue-avec-les-éléments-sélectionnés">On ajoute une vue avec les éléments sélectionnés</h2>
<p>Pour faire ça on va d&rsquo;abord ajouter une action sur notre <code>appBar</code> dans la méthode build de <code>_RandomWordsState</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"> <span style="color:#960050;background-color:#1e0010">@</span>override
  Widget build(BuildContext context) {
    <span style="color:#66d9ef">return</span> Scaffold(
      appBar: AppBar(
        title: Text(<span style="color:#e6db74">&#39;Mot aléatoires&#39;</span>),
        actions: [ <span style="color:#75715e">//ici
</span><span style="color:#75715e"></span>          IconButton(icon: Icon(Icons.list), onPressed: _pushSaved),
        ],
      ),

      body: _buildSuggestions(),
    );
  }
</code></pre></div><p>La fonction <code>_pushSaved</code> est donc à créer:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">void</span> _pushSaved() {
    Navigator.of(context).push(
      MaterialPageRoute<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">void</span><span style="color:#f92672">&gt;</span>(
        builder: (BuildContext context) {
          <span style="color:#66d9ef">final</span> tiles <span style="color:#f92672">=</span> _saved.map(
                (ReCase pair) {
              <span style="color:#66d9ef">return</span> ListTile(
                title: Text(
                  pair.pascalCase,
                  style: TextStyle(fontSize: <span style="color:#ae81ff">24.0</span>),
                ),
              );
            },
          );
          <span style="color:#66d9ef">final</span> divided <span style="color:#f92672">=</span> ListTile.divideTiles(
            context: context,
            tiles: tiles,
          ).toList();

          <span style="color:#66d9ef">return</span> Scaffold(
            appBar: AppBar(
              title: Text(<span style="color:#e6db74">&#39;Suggestions sauvées&#39;</span>),
            ),
            body: ListView(children: divided),
          );
        },
      ),
    );
  }
</code></pre></div><p>Cette méthode va créer une nouvelle page à partir des mots que nous aurons sélectionnés.</p>
<h2 id="dernier-make-up">Dernier make-up</h2>
<p>Nous avons deux barres et une couleur inadaptée. Pour les barres, on va modifier la méthode <code>build</code> de <code>MyApp</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyApp</span> <span style="color:#66d9ef">extends</span> StatelessWidget {
  <span style="color:#75715e">// This widget is the root of your application.
</span><span style="color:#75715e"></span>  <span style="color:#960050;background-color:#1e0010">@</span>override
  Widget build(BuildContext context) {
    <span style="color:#66d9ef">return</span> MaterialApp(
      title: <span style="color:#e6db74">&#39;Mes Mots&#39;</span>,
      home: RandomWords()
    );
  }
}
</code></pre></div><p>Enfin un peu d&rsquo;esthetique:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-dart" data-lang="dart"><span style="color:#960050;background-color:#1e0010">@</span>override
  Widget build(BuildContext context) {

    <span style="color:#66d9ef">return</span> MaterialApp(
      title: <span style="color:#e6db74">&#39;Mes Mots&#39;</span>,
      debugShowCheckedModeBanner: <span style="color:#66d9ef">false</span>, <span style="color:#75715e">// cacher le ruban debug
</span><span style="color:#75715e"></span>      theme: ThemeData(
        primaryColor: Colors.white <span style="color:#75715e">// le blanc c&#39;est plus chic
</span><span style="color:#75715e"></span>      ),
      home: RandomWords()
    );
  }
</code></pre></div><p>Et voilà</p>
<p><img src="/img/flutter/screen1.png" alt="screen1">     <img src="/img/flutter/screen2.png" alt="screen1"></p>

		</div>
		<footer class="post__footer">
			
<div class="post__tags tags clearfix">
	<svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5 0 11V3C0 1.5.8.8.8.8S1.5 0 3 0h8c1.5 0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/></svg>
	<ul class="tags__list">
		<li class="tags__item"><a class="tags__link btn" href="/tags/flutter/" rel="tag">Flutter</a></li>
	</ul>
</div>
		</footer>
	</article>
</main>

<div class="authorbox clearfix">
	<figure class="authorbox__avatar">
		<img alt="Germain SIPIERE avatar" src="/img/moi.jpg" class="avatar" height="90" width="90">
	</figure>
	<div class="authorbox__header">
		<span class="authorbox__name"></span>
	</div>
	<div class="authorbox__description">
		Germain SIPIERE, formateur en conception et développement d&#39;applications à l&#39;AFPA. J&#39;utilise différentes technologies et j&#39;adore en découvrir continuellement de nouvelles
	</div>
</div>

<nav class="post-nav flex">
	<div class="post-nav__item post-nav__item--prev">
		<a class="post-nav__link" href="/post/cours/java/javafxelmts/" rel="prev"><span class="post-nav__caption">«&thinsp;Précédent</span><p class="post-nav__post-title">JavaFXelmts</p></a>
	</div>
	<div class="post-nav__item post-nav__item--next">
		<a class="post-nav__link" href="/post/cours/electron/electron-intro/" rel="next"><span class="post-nav__caption">Suivant&thinsp;»</span><p class="post-nav__post-title">Electron Intro</p></a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2021 Germain SIPIERE.
			<span class="footer__copyright-credits">Produit par <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> et le thème <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a>.</span>
		</div>
	</div>
</footer>
	</div>
<script async defer src="/js/menu.js"></script>
<script src="/js/custom.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script>
</body>
</html>